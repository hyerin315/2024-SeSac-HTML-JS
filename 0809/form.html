<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    window.addEventListener('load', init, false);
    function init() {
      //const original = document.querySelector('#original'); // #(샾) : id, .(점) : class
      //original.addEventListener('change', myChange, false); // change : 이벤트는 작성 후 아무곳이나 클릭했을 때(텍스트 박스 등 자신이 포커스를 잃을 때) 1번 변경 이벤트 발생
      const email = document.querySelector('#email');
      email.addEventListener('change', myChange, false);
    }

    function myChange(evt) {
      //console.log(evt.target.value);
      //document.querySelector('#target').value = evt.target.value;
      
      // 이메일 검증
      const user = evt.target.value; // user가 입력한 값

      // 정규식 사용
      // 방법 1 - new 사용
      //const regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,3}');
      // 방법 2 - new 제외하고 사용
      const regex = /[a-z0-9]+@[a-z]+\.[a-z]{2,3}/;
      if(regex.test(user)) { // user가 제대로 이메일을 입력했다면
        document.body.style.backgroundColor = 'yellow';
        alert('Success');
      } else { // user가 제대로 이메일을 입력하지 않았다면
        document.body.style.backgroundColor = 'red';
        alert('Failure');
      }
    }
  </script>
</head>
<body>
  <h1>From & Event</h1>
  <form id="myform">
    <!-- <p>
      Original : <input type="text" id="original" size="40" />
    </p>
    <p>
      Target : <input type="text" id="target" size="40" />
    </p> -->
    <p>
      Email : <input type="email" id="email" size="40" />
    </p>
  </form>
</body>
</html>